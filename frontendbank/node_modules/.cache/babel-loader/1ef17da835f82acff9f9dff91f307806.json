{"ast":null,"code":"var _jsxFileName = \"/Users/ashkannadiri/Documents/dajngo-drf-bank-local/frontendbank/src/components/pages/Branches.js\";\nimport React, { Component } from 'react';\nimport Modal from '../layout/Modal';\nimport AddItem from '../layout/AddItem'; // import uuid from 'uuid'\n\nimport axios from 'axios'; // const api_url = 'https://bank-django-drf-local.herokuapp.com/branch/'\n\nconst custom_options = {\n  headers: {\n    'Origin': 'https://bank-django-drf-local.herokuapp.com',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS, PUT, PATCH, DELETE',\n    'Content-Type': 'application/json',\n    'Accept': 'text/html; q=1.0, */*',\n    'X-Requested-With': 'XMLHttpRequest',\n    'Access-Control-Allow-Headers': 'X-Requested-With,content-type',\n    'Access-Control-Allow-Credentials': true\n  }\n};\n\nclass Branch extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      branches: []\n    };\n\n    this.refreshBranches = branch => {\n      console.log(`${branch} @ ${Date.now().toString()}`);\n      axios.get('http://127.0.0.1:8000/branches/').then(res => this.setState({\n        branches: res.data.results\n      })).catch(err => console.log(err));\n    };\n\n    this.addItem = branch => {\n      body = {\n        \"branch\": branch,\n        \"address\": def\n      }; // console.log(`${branch} @ ${Date.now().toString()}`)\n\n      axios.post('http://127.0.0.1:8000/branches/', body, custom_options).then(res => this.setState({\n        branches: [...this.state.branches, res.data.results]\n      })).catch(err => console.log(err));\n    };\n\n    this.delBranch = id => {\n      axios.delete(`http://127.0.0.1:8000/branches/${id}/`).then(res => this.refreshBranches()); //.setState({ branches: [...this.state.branches.filter(branch => branch.id !== id)]})\n    };\n\n    this.markDeleted = id => {\n      this.setState({\n        branches: this.state.branches.map(branch => {\n          if (branch.id === id) {\n            branch.deleted = !branch.deleted;\n          }\n\n          return branch;\n        })\n      });\n    };\n\n    this.renderBranch = () => {\n      return this.state.branches.map(branch => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        key: branch.id,\n        branch: branch,\n        markDeleted: this.markDeleted,\n        delBranch: this.delBranch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })));\n    };\n  }\n\n  componentDidMount() {\n    this.refreshBranches();\n  } //refresh branch list\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(AddItem, {\n      placeholder: 'Branch Name',\n      addItem: this.addItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), \" \", this.renderBranch());\n  }\n\n}\n\n;\nexport default Branch;","map":{"version":3,"sources":["/Users/ashkannadiri/Documents/dajngo-drf-bank-local/frontendbank/src/components/pages/Branches.js"],"names":["React","Component","Modal","AddItem","axios","custom_options","headers","Branch","state","branches","refreshBranches","branch","console","log","Date","now","toString","get","then","res","setState","data","results","catch","err","addItem","body","def","post","delBranch","id","delete","markDeleted","map","deleted","renderBranch","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Modal from '../layout/Modal';\nimport AddItem from '../layout/AddItem'\n// import uuid from 'uuid'\nimport axios from 'axios';\n\n\n\n// const api_url = 'https://bank-django-drf-local.herokuapp.com/branch/'\nconst custom_options = {\n    headers: {\n        'Origin' : 'https://bank-django-drf-local.herokuapp.com',\n        'Access-Control-Allow-Origin' : '*',\n        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS, PUT, PATCH, DELETE',\n        'Content-Type' : 'application/json',\n        'Accept' : 'text/html; q=1.0, */*',\n        'X-Requested-With' : 'XMLHttpRequest',\n        'Access-Control-Allow-Headers' : 'X-Requested-With,content-type',\n        'Access-Control-Allow-Credentials' : true,\n    }\n};\n\nclass Branch extends Component {\n\n    state = {\n        branches: []\n    }\n\n    componentDidMount() {\n        this.refreshBranches();\n    }\n\n\n    //refresh branch list\n    refreshBranches= (branch) => {\n        console.log(`${branch} @ ${Date.now().toString()}`)\n        axios.get('http://127.0.0.1:8000/branches/')\n            .then(res => this.setState({branches: res.data.results}))\n            .catch(err=> console.log(err))\n    }\n    //Add item\n    addItem = (branch) => {\n        body = {\"branch\": branch,\"address\": def}\n        // console.log(`${branch} @ ${Date.now().toString()}`)\n        axios\n        .post('http://127.0.0.1:8000/branches/',\n        body\n        ,custom_options)\n        .then(res => this.setState({ branches: [...this.state.branches, res.data.results]}))\n        .catch(err => console.log(err))\n    }\n     //Delete branch\n    delBranch = (id) => {\n        axios.delete(`http://127.0.0.1:8000/branches/${id}/`)\n            .then(res => this.refreshBranches())\n            //.setState({ branches: [...this.state.branches.filter(branch => branch.id !== id)]})\n    }\n    // Toggle delete\n    markDeleted = (id)=>{\n        this.setState({ branches: this.state.branches.map(branch => {\n           if(branch.id === id ){\n               branch.deleted = !branch.deleted\n           } \n           return branch\n           \n        }) });\n    }\n   \n \n    renderBranch = () =>  {\n        return this.state.branches.map((branch) => (\n           <div>\n                <Modal \n                    key={branch.id}\n                    branch={branch} \n                    markDeleted={this.markDeleted} \n                    delBranch={this.delBranch}\n                />\n            </div>\n        )\n    )}\n\n        \n    render () {\n       return (\n           <div>\n               <AddItem placeholder={'Branch Name'} addItem={this.addItem}/> {\n                   this.renderBranch()\n               }\n           </div>\n       )\n   }\n};\n\n\n\nexport default Branch"]},"metadata":{},"sourceType":"module"}